<%- include("../partials/header") %>

<div class="login-container">
  <div class="login-box">
    <h2 class="login-title">Login to MoveOut</h2>

    <form action="/move/login" method="POST">
      <div class="input-container">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="Enter Email" required />
      </div>

      <div class="input-container">
        <label for="psw">Password</label>
        <input type="password" id="psw" name="psw" placeholder="Enter Password" required />
      </div>

      <% if (errorMessage) { %>
      <div class="error-message" id="error-message">
        <p><%= errorMessage %></p>
      </div>
      <% } %>

      <button type="submit" class="btn login-btn" id="submit-button">Login</button>

      <div class="forgot-password" id="forgot-password">
        <a href="#">Forgot password?</a>
      </div>

      <div class="register-link" id="register-link">
        <p>Don't have an account? <a href="/move/register">Sign Up</a></p>
      </div>
    </form>

    <!-- Google Login Button -->
    <div class="google-login" id="google-login">
      <a href="/auth/google" class="btn google-btn">
        <img src="/style/google.ico" alt="Google Icon" class="google-icon" />
        Login with Google
      </a>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const errorMessage = document.getElementById("error-message");
    const submitButton = document.getElementById("submit-button");
    const forgotPassword = document.getElementById("forgot-password");
    const googleLogin = document.getElementById("google-login");
    const registerLink = document.getElementById("register-link");

    if (errorMessage) {
      submitButton.style.display = "none";
      forgotPassword.style.display = "none";
      googleLogin.style.display = "none";
      registerLink.style.display = "none";
      errorMessage.style.display = "block";
      setTimeout(() => {
        errorMessage.style.display = "none";
        submitButton.style.display = "block";
        forgotPassword.style.display = "block";
        googleLogin.style.display = "block";
        registerLink.style.display = "block";
      }, 4000);
    }
  });
</script>

<%- include("../partials/footer") %>
