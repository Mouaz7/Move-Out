<%- include("../partials/header") %>

<div class="container">
  <h1 class="qr-header">My Boxes</h1>
  <ul class="box-list">
    <% boxes.forEach(box => { %>
    <li class="box-item">
      <div class="label-image">
        <% if (box.label_image && box.label_image !== 'undefined') { %>
        <img src="/style/images/<%= box.label_image %>" alt="Label Image" class="label-img" />
        <% } else { %>
        <div style="height: 180px; display: flex; align-items: center; justify-content: center; background: var(--glass-bg);">
          <i class="fas fa-box" style="font-size: 3rem; color: var(--text-muted);"></i>
        </div>
        <% } %>
      </div>
      <div class="box-name"><%= box.box_name %></div>
      <div class="actions">
        <a href="/move/boxes/view/<%= box.box_id %>" class="icon-button" title="View Box"><i class="fas fa-eye"></i></a>
        <a href="/move/boxes/edit/<%= box.box_id %>" class="icon-button" title="Edit Box"><i class="fas fa-pencil-alt"></i></a>
        <form action="/move/boxes/delete/<%= box.box_id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this box?')" style="display: inline">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <button type="submit" class="icon-button" title="Delete Box"><i class="fas fa-trash-alt"></i></button>
        </form>
      </div>
    </li>
    <% }) %>
  </ul>
  
  <% if (boxes.length === 0) { %>
  <div class="empty-state" style="margin-top: 40px;">
    <i class="fas fa-box-open" style="font-size: 4rem; color: var(--text-muted); margin-bottom: 20px;"></i>
    <p>You don't have any boxes yet.</p>
    <a href="/move/boxes/create" class="btn" style="margin-top: 20px; display: inline-flex;">
      <i class="fas fa-plus"></i> Create Your First Box
    </a>
  </div>
  <% } %>
</div>

<%- include("../partials/footer") %>
